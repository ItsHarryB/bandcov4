---
import { Twitter, Github, Linkedin } from "lucide-react";

const { platform, username, url } = Astro.props;

/**
 * Platforms supported:
 * - Twitter: pass `username` only
 * - GitHub: pass `username` only
 * - LinkedIn: pass full `url`
 */
let link = "#";
let Icon = null;
let brandClass = "";

if (platform === "Twitter" && username) {
  link = `https://twitter.com/${username}`;
  Icon = Twitter;
  brandClass = "twitter";
} else if (platform === "GitHub" && username) {
  link = `https://github.com/${username}`;
  Icon = Github;
  brandClass = "github";
} else if (platform === "LinkedIn" && url) {
  link = url;
  Icon = Linkedin;
  brandClass = "linkedin";
}
---

<a href={link} target="_blank" rel="noopener noreferrer" class={`social-link ${brandClass}`} aria-label={platform}>
  {Icon && <Icon class="icon" size={20} />}
  <span class="sr-only">{platform}</span>
</a>

<style>
  .social-link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: #f0f0f0;
    color: #333;
    text-decoration: none;
    transition: background 0.3s ease, color 0.3s ease, transform 0.2s ease;
  }

  .social-link:hover {
    transform: translateY(-2px);
  }

  .social-link .icon {
    stroke-width: 1.8;
  }

  /* Brand colors on hover */
  .social-link.twitter:hover {
    background: #1DA1F2;
    color: #fff;
  }

  .social-link.github:hover {
    background: #24292f;
    color: #fff;
  }

  .social-link.linkedin:hover {
    background: #0A66C2;
    color: #fff;
  }

  /* Dark mode base */
  html.dark .social-link {
    background: #333;
    color: #ddd;
  }

  html.dark .social-link:hover {
    color: #fff;
  }

  /* Screen reader only text */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
</style>
