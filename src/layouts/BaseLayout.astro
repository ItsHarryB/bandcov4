---
import "../styles/global.css";
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TEST: Brighton and Co</title>
  </head>
  <body>
    <header class="site-header">
      <!-- Hamburger -->
      <div class="hamburger">
        <span class="line line1"></span>
        <span class="line line2"></span>
        <span class="line line3"></span>
      </div>

      <!-- Site title -->
      <div class="site-title">
        <a href="/">TEST: Brighton and Co</a>
      </div>

      <!-- Theme toggle -->
      <button id="theme-toggle" class="theme-toggle">
        <span class="theme-icon"></span>
      </button>

      <!-- Nav links -->
      <nav class="nav-links">
        <a href="/">Home</a>
        <a href="/enquiries/">Enquiries</a>
        <a href="/about/">About Me</a>
        <a href="/blog/">Blog</a>
        <a href="/photography/">Photography</a>
        <a href="/links/">Links</a>
      </nav>
    </header>

    <main>
      <slot />
    </main>

    <script type="module">
      document.addEventListener('DOMContentLoaded', () => {
        const hamburger = document.querySelector('.hamburger');
        const nav = document.querySelector('.nav-links');

        // Hamburger toggle
        if (hamburger && nav) {
          hamburger.addEventListener('click', () => {
            nav.classList.toggle('expanded');
            hamburger.classList.toggle('active');
          });
        }

        const themeToggle = document.getElementById('theme-toggle');
        if (themeToggle) {
          const themeIcon = themeToggle.querySelector('.theme-icon');
          if (!themeIcon) return;

          // Inject spinning CSS
          const style = document.createElement('style');
          style.textContent = `
            .theme-icon.spin { display: inline-block; animation: spin 0.5s linear; }
            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
          `;
          document.head.appendChild(style);

          function setTheme(theme) {
            // Spin icon
            themeIcon.classList.add('spin');
            setTimeout(() => themeIcon.classList.remove('spin'), 500);

            if (theme === 'dark') {
              document.documentElement.classList.add('dark');
              themeIcon.textContent = '🌙';
              themeIcon.style.color = '#ffffff';
              if (hamburger) {
                hamburger.querySelectorAll('.line').forEach(line => line.style.backgroundColor = '#ffffff');
              }
              localStorage.setItem('theme', 'dark');
            } else {
              document.documentElement.classList.remove('dark');
              themeIcon.textContent = '☀️';
              themeIcon.style.color = '#0094b6';
              if (hamburger) {
                hamburger.querySelectorAll('.line').forEach(line => line.style.backgroundColor = '#0094b6');
              }
              localStorage.setItem('theme', 'light');
            }
          }

          // Apply saved theme on load
          const savedTheme = localStorage.getItem('theme') || 'light';
          setTheme(savedTheme);

          // Toggle on click
          themeToggle.addEventListener('click', () => {
            const current = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
            setTheme(current === 'dark' ? 'light' : 'dark');
          });
        }
      });
    </script>
  </body>
</html>
